<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>IP Paris Map</title>
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">

    <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet">
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js" crossorigin="anonymous"></script>

    <!-- Mapbox Draw -->
    <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-draw/v1.4.2/mapbox-gl-draw.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-draw/v1.4.2/mapbox-gl-draw.css"
        type="text/css">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        if (typeof tailwind !== 'undefined') {
            tailwind.config = {
                theme: {
                    extend: {
                        fontFamily: {
                            sans: ['Segoe UI', 'Tahoma', 'Geneva', 'Verdana', 'sans-serif'],
                        },
                        colors: {
                            glass: {
                                dark: 'rgba(15, 15, 20, 0.95)',
                                darker: 'rgba(10, 10, 15, 0.98)',
                            }
                        }
                    }
                }
            }
        }
    </script>

    <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">
</head>

<body class="m-0 p-0 bg-black h-screen w-screen overflow-hidden">
    <div id="debug-ids"
        class="absolute top-2 left-2 z-[9999] text-white bg-black/50 p-2 rounded text-xs font-mono pointer-events-none">
        IDs: -</div>
    <div id="main_container" class="relative w-full h-full flex flex-col">
        <!-- Right Sidebar -->
        <div id="right-sidebar"
            class="absolute bottom-5 right-5 w-[190px] flex flex-col gap-2.5 p-3.5 bg-gradient-to-b from-[#0f0f14f2] to-[#0a0a0ffa] border border-white/10 rounded-lg shadow-[0_8px_32px_rgba(0,0,0,0.6),0_0_0_1px_rgba(255,255,255,0.05)_inset] backdrop-blur-md transition-all duration-300 z-[100] text-white hover:shadow-[0_12px_48px_rgba(0,0,0,0.7),0_0_0_1px_rgba(255,255,255,0.1)_inset] hover:border-white/20">
            <!-- Map Styles Section -->
            <div
                class="toolbar-section flex-1 flex flex-col bg-[#1e1e1e80] border border-white/10 rounded overflow-hidden transition-all duration-300 hover:bg-[#28282899] hover:-translate-y-0.5 hover:shadow-lg hover:border-white/20 relative first:border-white/20 first:border-2">
                <div
                    class="section-title px-3 py-2 bg-gradient-to-r from-white/15 to-white/5 border-b border-white/15 text-[11px] font-semibold uppercase tracking-[1px] text-white/90 text-center">
                    Map Styles</div>
                <div class="section-content flex-1 grid grid-cols-2 grid-rows-2">
                    <button id="btn-light"
                        class="flex-1 bg-transparent border-0 border-b border-r border-white/10 text-white/85 text-xs font-medium relative py-2 px-1 hover:bg-white/10 hover:text-white transition-all duration-200 cursor-pointer [&.active]:bg-gradient-to-b [&.active]:from-[#4682ff66] [&.active]:to-[#4682ff33] [&.active]:text-white [&.active]:font-semibold [&.active]:border-x-2 [&.active]:border-[#64a0ffcc] active">Light</button>
                    <button id="btn-dark"
                        class="flex-1 bg-transparent border-0 border-b border-white/10 text-white/85 text-xs font-medium relative py-2 px-1 hover:bg-white/10 hover:text-white transition-all duration-200 cursor-pointer [&.active]:bg-gradient-to-b [&.active]:from-[#4682ff66] [&.active]:to-[#4682ff33] [&.active]:text-white [&.active]:font-semibold [&.active]:border-x-2 [&.active]:border-[#64a0ffcc]">Dark</button>
                    <button id="btn-streets"
                        class="flex-1 bg-transparent border-0 border-r border-white/10 text-white/85 text-xs font-medium relative py-2 px-1 hover:bg-white/10 hover:text-white transition-all duration-200 cursor-pointer [&.active]:bg-gradient-to-b [&.active]:from-[#4682ff66] [&.active]:to-[#4682ff33] [&.active]:text-white [&.active]:font-semibold [&.active]:border-x-2 [&.active]:border-[#64a0ffcc]">Streets</button>
                    <button id="btn-satellite"
                        class="flex-1 bg-transparent border-0 text-white/85 text-xs font-medium relative py-2 px-1 hover:bg-white/10 hover:text-white transition-all duration-200 cursor-pointer [&.active]:bg-gradient-to-b [&.active]:from-[#4682ff66] [&.active]:to-[#4682ff33] [&.active]:text-white [&.active]:font-semibold [&.active]:border-x-2 [&.active]:border-[#64a0ffcc]">Satellite</button>
                </div>
            </div>

            <!-- Layers Section -->
            <div id="toolbar-layers"
                class="toolbar-section flex-1 flex flex-col bg-[#1e1e1e80] border border-white/10 rounded overflow-hidden transition-all duration-300 hover:bg-[#28282899] hover:-translate-y-0.5 hover:shadow-lg hover:border-white/20 relative">
                <div
                    class="section-title px-3 py-2 bg-gradient-to-r from-white/15 to-white/5 border-b border-white/15 text-[11px] font-semibold uppercase tracking-[1px] text-white/90 text-center">
                    Layers</div>
                <div class="section-content flex-1 flex flex-col items-stretch">
                    <button id="btn-layer-bus"
                        class="layer-toggle flex-1 bg-transparent border-0 border-b border-white/10 text-white/85 text-xs font-medium relative py-2 px-1 hover:bg-white/10 hover:text-white transition-all duration-200 cursor-pointer [&.active]:bg-green-600 [&.active]:text-white [&.active]:hover:bg-green-500">Bus</button>
                    <button id="btn-layer-bike"
                        class="layer-toggle flex-1 bg-transparent border-0 border-b border-white/10 text-white/85 text-xs font-medium relative py-2 px-1 hover:bg-white/10 hover:text-white transition-all duration-200 cursor-pointer [&.active]:bg-green-600 [&.active]:text-white [&.active]:hover:bg-green-500">Bicycle</button>
                    <button id="btn-layer-walk"
                        class="layer-toggle flex-1 bg-transparent border-0 border-b border-white/10 text-white/85 text-xs font-medium relative py-2 px-1 hover:bg-white/10 hover:text-white transition-all duration-200 cursor-pointer [&.active]:bg-green-600 [&.active]:text-white [&.active]:hover:bg-green-500">Walk</button>
                    <button id="btn-layer-roads"
                        class="layer-toggle flex-1 bg-transparent border-0 border-b border-white/10 text-white/85 text-xs font-medium relative py-2 px-1 hover:bg-white/10 hover:text-white transition-all duration-200 cursor-pointer [&.active]:bg-green-600 [&.active]:text-white [&.active]:hover:bg-green-500">Roads</button>
                    <button id="btn-layer-amenities"
                        class="layer-toggle flex-1 bg-transparent border-0 border-b border-white/10 text-white/85 text-xs font-medium relative py-2 px-1 hover:bg-white/10 hover:text-white transition-all duration-200 cursor-pointer [&.active]:bg-green-600 [&.active]:text-white [&.active]:hover:bg-green-500">Amenities</button>
                    <button id="btn-layer-floorplan"
                        class="layer-toggle flex-1 bg-transparent border-0 border-b-0 text-white/85 text-xs font-medium relative py-2 px-1 hover:bg-white/10 hover:text-white transition-all duration-200 cursor-pointer [&.active]:bg-green-600 [&.active]:text-white [&.active]:hover:bg-green-500">Floorplan</button>
                </div>
            </div>

            <!-- Shortest Path Section -->
            <div id="toolbar-shortest-path"
                class="toolbar-section flex-1 flex flex-col bg-[#1e1e1e80] border border-white/10 rounded overflow-hidden transition-all duration-300 hover:bg-[#28282899] hover:-translate-y-0.5 hover:shadow-lg hover:border-white/20 relative">
                <div
                    class="section-title px-3 py-2 bg-gradient-to-r from-white/15 to-white/5 border-b border-white/15 text-[11px] font-semibold uppercase tracking-[1px] text-white/90 text-center">
                    Shortest Path</div>
                <div class="section-content flex-1 flex flex-col items-stretch">
                    <button
                        class="draggable-source flex-1 bg-transparent border-0 border-b border-white/10 text-white/85 text-xs font-medium relative py-2 px-1 hover:bg-white/10 hover:text-white transition-all duration-200 cursor-pointer">A</button>
                    <button
                        class="draggable-source flex-1 bg-transparent border-0 border-b-0 text-white/85 text-xs font-medium relative py-2 px-1 hover:bg-white/10 hover:text-white transition-all duration-200 cursor-pointer">B</button>
                </div>
            </div>

            <!-- Tools Section -->
            <div id="toolbar-reach"
                class="toolbar-section flex-1 flex flex-col bg-[#1e1e1e80] border border-white/10 rounded overflow-hidden transition-all duration-300 hover:bg-[#28282899] hover:-translate-y-0.5 hover:shadow-lg hover:border-white/20 relative">
                <div
                    class="section-title px-3 py-2 bg-gradient-to-r from-white/15 to-white/5 border-b border-white/15 text-[11px] font-semibold uppercase tracking-[1px] text-white/90 text-center">
                    15-Minute Reach</div>
                <div class="section-content flex-1 flex flex-col items-stretch">
                    <button id="btn-isochrone"
                        class="flex-1 bg-transparent border-0 border-b border-white/10 text-white/85 text-xs font-medium relative py-2 px-1 hover:bg-white/10 hover:text-white transition-all duration-200 cursor-pointer [&.active]:bg-gradient-to-b [&.active]:from-[#4682ff66] [&.active]:to-[#4682ff33] [&.active]:text-white [&.active]:font-semibold [&.active]:border-x-2 [&.active]:border-[#64a0ffcc]">Walk</button>
                    <button id="btn-isochrone-bike"
                        class="flex-1 bg-transparent border-0 border-b border-white/10 text-white/85 text-xs font-medium relative py-2 px-1 hover:bg-white/10 hover:text-white transition-all duration-200 cursor-pointer [&.active]:bg-gradient-to-b [&.active]:from-[#4682ff66] [&.active]:to-[#4682ff33] [&.active]:text-white [&.active]:font-semibold [&.active]:border-x-2 [&.active]:border-[#64a0ffcc]">Cycling</button>
                    <button id="btn-isochrone-car"
                        class="flex-1 bg-transparent border-0 border-b-0 text-white/85 text-xs font-medium relative py-2 px-1 hover:bg-white/10 hover:text-white transition-all duration-200 cursor-pointer">Car</button>
                </div>
            </div>

            <div
                class="toolbar-section flex-none min-h-fit flex flex-col bg-[#1e1e1e80] border border-white/10 rounded overflow-hidden transition-all duration-300 hover:bg-[#28282899] hover:-translate-y-0.5 hover:shadow-lg hover:border-white/20 relative">
                <div
                    class="section-title px-3 py-2 bg-gradient-to-r from-white/15 to-white/5 border-b border-white/15 text-[11px] font-semibold uppercase tracking-[1px] text-white/90 text-center">
                    Previous Answers</div>
                <div class="section-content flex flex-col gap-2 p-2.5">
                    <button id="btn-previous-answers"
                        class="w-full px-3 py-2 bg-white/5 border border-white/15 rounded-md text-white/85 text-xs font-semibold uppercase tracking-[1px] transition-all duration-200 hover:bg-white/10 hover:border-white/30 hover:text-white [&.active]:bg-white/15 [&.active]:border-white/40 [&.active]:text-white"
                        aria-pressed="false">
                        Show Previous Answers
                    </button>
                    <div id="previous-answers-panel" class="hidden rounded-md border border-white/10 bg-white/5 p-2">
                        <div id="previous-answers-summary" class="text-[11px] text-white/70 uppercase tracking-[1px]">
                        </div>
                        <div id="previous-answers-list" class="mt-2 flex flex-col gap-2 text-xs text-white/85"></div>
                    </div>
                </div>
            </div>
        </div>

        <div id="map" class="relative flex-1 w-full"></div>

        <div id="workshop-bars" class="workshop-bars">
            <div class="workshop-bar workshop-bar--top">
                <div class="workshop-panel">
                    <button type="button" class="workshop-btn" data-draw-mode="draw_line_string">Line</button>
                    <div class="workshop-stickers">
                        <button id="workshop-top-sticker-1" class="point-btn workshop-sticker" data-sticker-index="0" data-color="#FF6B6B" style="background-color: #FF6B6B;"></button>
                        <button id="workshop-top-sticker-2" class="point-btn workshop-sticker" data-sticker-index="1" data-color="#4ECDC4" style="background-color: #4ECDC4;"></button>
                        <button id="workshop-top-sticker-3" class="point-btn workshop-sticker" data-sticker-index="2" data-color="#45B7D1" style="background-color: #45B7D1;"></button>
                        <button id="workshop-top-sticker-4" class="point-btn workshop-sticker" data-sticker-index="3" data-color="#FFA07A" style="background-color: #FFA07A;"></button>
                        <button id="workshop-top-sticker-5" class="point-btn workshop-sticker" data-sticker-index="4" data-color="#98D8C8" style="background-color: #98D8C8;"></button>
                        <button id="workshop-top-sticker-6" class="point-btn workshop-sticker" data-sticker-index="5" data-color="#F7DC6F" style="background-color: #F7DC6F;"></button>
                        <button id="workshop-top-sticker-7" class="point-btn workshop-sticker" data-sticker-index="6" data-color="#BB8FCE" style="background-color: #BB8FCE;"></button>
                        <button id="workshop-top-sticker-8" class="point-btn workshop-sticker" data-sticker-index="7" data-color="#85C1E2" style="background-color: #85C1E2;"></button>
                        <button id="workshop-top-sticker-9" class="point-btn workshop-sticker" data-sticker-index="8" data-color="#F8B739" style="background-color: #F8B739;"></button>
                        <button id="workshop-top-sticker-10" class="point-btn workshop-sticker" data-sticker-index="9" data-color="#E74C3C" style="background-color: #E74C3C;"></button>
                    </div>
                </div>
            </div>
            <div class="workshop-bar workshop-bar--bottom">
                <div class="workshop-panel">
                    <button type="button" class="workshop-btn" data-draw-mode="draw_line_string">Line</button>
                    <div class="workshop-stickers">
                        <button id="workshop-bottom-sticker-1" class="point-btn workshop-sticker" data-sticker-index="0" data-color="#FF6B6B" style="background-color: #FF6B6B;"></button>
                        <button id="workshop-bottom-sticker-2" class="point-btn workshop-sticker" data-sticker-index="1" data-color="#4ECDC4" style="background-color: #4ECDC4;"></button>
                        <button id="workshop-bottom-sticker-3" class="point-btn workshop-sticker" data-sticker-index="2" data-color="#45B7D1" style="background-color: #45B7D1;"></button>
                        <button id="workshop-bottom-sticker-4" class="point-btn workshop-sticker" data-sticker-index="3" data-color="#FFA07A" style="background-color: #FFA07A;"></button>
                        <button id="workshop-bottom-sticker-5" class="point-btn workshop-sticker" data-sticker-index="4" data-color="#98D8C8" style="background-color: #98D8C8;"></button>
                        <button id="workshop-bottom-sticker-6" class="point-btn workshop-sticker" data-sticker-index="5" data-color="#F7DC6F" style="background-color: #F7DC6F;"></button>
                        <button id="workshop-bottom-sticker-7" class="point-btn workshop-sticker" data-sticker-index="6" data-color="#BB8FCE" style="background-color: #BB8FCE;"></button>
                        <button id="workshop-bottom-sticker-8" class="point-btn workshop-sticker" data-sticker-index="7" data-color="#85C1E2" style="background-color: #85C1E2;"></button>
                        <button id="workshop-bottom-sticker-9" class="point-btn workshop-sticker" data-sticker-index="8" data-color="#F8B739" style="background-color: #F8B739;"></button>
                        <button id="workshop-bottom-sticker-10" class="point-btn workshop-sticker" data-sticker-index="9" data-color="#E74C3C" style="background-color: #E74C3C;"></button>
                    </div>
                </div>
            </div>
            <div class="workshop-bar workshop-bar--left">
                <div class="workshop-panel">
                    <button type="button" class="workshop-btn" data-draw-mode="draw_line_string">Line</button>
                    <div class="workshop-stickers">
                        <button id="workshop-left-sticker-1" class="point-btn workshop-sticker" data-sticker-index="0" data-color="#FF6B6B" style="background-color: #FF6B6B;"></button>
                        <button id="workshop-left-sticker-2" class="point-btn workshop-sticker" data-sticker-index="1" data-color="#4ECDC4" style="background-color: #4ECDC4;"></button>
                        <button id="workshop-left-sticker-3" class="point-btn workshop-sticker" data-sticker-index="2" data-color="#45B7D1" style="background-color: #45B7D1;"></button>
                        <button id="workshop-left-sticker-4" class="point-btn workshop-sticker" data-sticker-index="3" data-color="#FFA07A" style="background-color: #FFA07A;"></button>
                        <button id="workshop-left-sticker-5" class="point-btn workshop-sticker" data-sticker-index="4" data-color="#98D8C8" style="background-color: #98D8C8;"></button>
                        <button id="workshop-left-sticker-6" class="point-btn workshop-sticker" data-sticker-index="5" data-color="#F7DC6F" style="background-color: #F7DC6F;"></button>
                        <button id="workshop-left-sticker-7" class="point-btn workshop-sticker" data-sticker-index="6" data-color="#BB8FCE" style="background-color: #BB8FCE;"></button>
                        <button id="workshop-left-sticker-8" class="point-btn workshop-sticker" data-sticker-index="7" data-color="#85C1E2" style="background-color: #85C1E2;"></button>
                        <button id="workshop-left-sticker-9" class="point-btn workshop-sticker" data-sticker-index="8" data-color="#F8B739" style="background-color: #F8B739;"></button>
                        <button id="workshop-left-sticker-10" class="point-btn workshop-sticker" data-sticker-index="9" data-color="#E74C3C" style="background-color: #E74C3C;"></button>
                    </div>
                </div>
            </div>
            <div class="workshop-bar workshop-bar--right">
                <div class="workshop-panel">
                    <button type="button" class="workshop-btn" data-draw-mode="draw_line_string">Line</button>
                    <div class="workshop-stickers">
                        <button id="workshop-right-sticker-1" class="point-btn workshop-sticker" data-sticker-index="0" data-color="#FF6B6B" style="background-color: #FF6B6B;"></button>
                        <button id="workshop-right-sticker-2" class="point-btn workshop-sticker" data-sticker-index="1" data-color="#4ECDC4" style="background-color: #4ECDC4;"></button>
                        <button id="workshop-right-sticker-3" class="point-btn workshop-sticker" data-sticker-index="2" data-color="#45B7D1" style="background-color: #45B7D1;"></button>
                        <button id="workshop-right-sticker-4" class="point-btn workshop-sticker" data-sticker-index="3" data-color="#FFA07A" style="background-color: #FFA07A;"></button>
                        <button id="workshop-right-sticker-5" class="point-btn workshop-sticker" data-sticker-index="4" data-color="#98D8C8" style="background-color: #98D8C8;"></button>
                        <button id="workshop-right-sticker-6" class="point-btn workshop-sticker" data-sticker-index="5" data-color="#F7DC6F" style="background-color: #F7DC6F;"></button>
                        <button id="workshop-right-sticker-7" class="point-btn workshop-sticker" data-sticker-index="6" data-color="#BB8FCE" style="background-color: #BB8FCE;"></button>
                        <button id="workshop-right-sticker-8" class="point-btn workshop-sticker" data-sticker-index="7" data-color="#85C1E2" style="background-color: #85C1E2;"></button>
                        <button id="workshop-right-sticker-9" class="point-btn workshop-sticker" data-sticker-index="8" data-color="#F8B739" style="background-color: #F8B739;"></button>
                        <button id="workshop-right-sticker-10" class="point-btn workshop-sticker" data-sticker-index="9" data-color="#E74C3C" style="background-color: #E74C3C;"></button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Left Sidebar -->
        <div id="left-sidebar"
            class="absolute bottom-5 left-5 w-[260px] flex flex-col gap-2.5 p-3.5 bg-gradient-to-b from-[#0f0f14f2] to-[#0a0a0ffa] border border-white/10 rounded-lg shadow-[0_8px_32px_rgba(0,0,0,0.6),0_0_0_1px_rgba(255,255,255,0.05)_inset] backdrop-blur-md transition-all duration-300 z-[100] text-white opacity-60 hover:opacity-100 hover:shadow-[0_12px_48px_rgba(0,0,0,0.7),0_0_0_1px_rgba(255,255,255,0.1)_inset] hover:border-white/20">
            <div id="question-panel"
                class="bg-[linear-gradient(135deg,rgba(30,30,40,0.75)_0%,rgba(20,20,30,0.75)_100%)] border border-white/15 rounded-lg px-4 py-4 shadow-[0_8px_32px_rgba(0,0,0,0.4),0_0_0_1px_rgba(255,255,255,0.08)_inset] backdrop-blur-md transition-all duration-300 hover:shadow-[0_12px_40px_rgba(0,0,0,0.99),0_0_0_1px_rgba(255,255,255,0.15)_inset]">
                <div class="progress-dots flex justify-center gap-2.5 mb-4">
                    <span
                        class="dot active w-2.5 h-2.5 flex-none rounded-full bg-white/30 transition-all duration-300 cursor-pointer hover:bg-white/50 hover:scale-110 [&.active]:bg-gradient-to-br [&.active]:from-[#667eea] [&.active]:to-[#764ba2] [&.active]:scale-125 [&.active]:shadow-sm"></span>
                    <span
                        class="dot w-2.5 h-2.5 flex-none rounded-full bg-white/30 transition-all duration-300 cursor-pointer hover:bg-white/50 hover:scale-110 [&.active]:bg-gradient-to-br [&.active]:from-[#667eea] [&.active]:to-[#764ba2] [&.active]:scale-125 [&.active]:shadow-sm"></span>
                    <span
                        class="dot w-2.5 h-2.5 flex-none rounded-full bg-white/30 transition-all duration-300 cursor-pointer hover:bg-white/50 hover:scale-110 [&.active]:bg-gradient-to-br [&.active]:from-[#667eea] [&.active]:to-[#764ba2] [&.active]:scale-125 [&.active]:shadow-sm"></span>
                    <span
                        class="dot w-2.5 h-2.5 flex-none rounded-full bg-white/30 transition-all duration-300 cursor-pointer hover:bg-white/50 hover:scale-110 [&.active]:bg-gradient-to-br [&.active]:from-[#667eea] [&.active]:to-[#764ba2] [&.active]:scale-125 [&.active]:shadow-sm"></span>
                    <span
                        class="dot w-2.5 h-2.5 flex-none rounded-full bg-white/30 transition-all duration-300 cursor-pointer hover:bg-white/50 hover:scale-110 [&.active]:bg-gradient-to-br [&.active]:from-[#667eea] [&.active]:to-[#764ba2] [&.active]:scale-125 [&.active]:shadow-sm"></span>
                </div>
                <div class="question-text text-white/95 text-sm font-medium text-center leading-normal tracking-wide">
                    How do you typically travel to campus?
                </div>
                <div id="question-options" class="mt-3 flex flex-col gap-2"></div>
                <div class="question-content flex items-center justify-between gap-3 mt-4">
                    <button id="prev-btn"
                        class="nav-btn bg-gradient-to-br from-white/10 to-white/5 border border-white/20 rounded w-10 h-10 flex items-center justify-center cursor-pointer text-white/90 transition-all duration-200 flex-shrink-0 hover:from-white/20 hover:to-white/10 hover:border-white/40 hover:scale-105 hover:shadow-lg disabled:opacity-30 disabled:cursor-not-allowed disabled:pointer-events-none active:scale-95">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <polyline points="15 18 9 12 15 6"></polyline>
                        </svg>
                    </button>
                    <button id="next-btn"
                        class="nav-btn bg-gradient-to-br from-white/10 to-white/5 border border-white/20 rounded w-10 h-10 flex items-center justify-center cursor-pointer text-white/90 transition-all duration-200 flex-shrink-0 hover:from-white/20 hover:to-white/10 hover:border-white/40 hover:scale-105 hover:shadow-lg disabled:opacity-30 disabled:cursor-not-allowed disabled:pointer-events-none active:scale-95">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <polyline points="9 18 15 12 9 6"></polyline>
                        </svg>
                    </button>
                    <button id="finish-btn"
                        class="nav-btn hidden bg-gradient-to-br from-white/15 to-white/5 border border-white/25 rounded h-10 px-4 flex items-center justify-center cursor-pointer text-white/95 text-xs font-semibold uppercase tracking-[1px] transition-all duration-200 flex-shrink-0 hover:from-white/25 hover:to-white/10 hover:border-white/50 hover:scale-105 hover:shadow-lg active:scale-95">
                        Finish
                    </button>
                </div>
            </div>
            <div
                class="toolbar-section flex-none min-h-fit flex flex-col bg-[#1e1e1e80] border border-white/10 rounded overflow-hidden transition-all duration-300 hover:bg-[#28282899] hover:-translate-y-0.5 hover:shadow-lg hover:border-white/20 relative">
                <div
                    class="section-title px-3 py-2 bg-gradient-to-r from-white/15 to-white/5 border-b border-white/15 text-[11px] font-semibold uppercase tracking-[1px] text-white/90 text-center">
                    Drawing</div>
                <div class="section-content flex-1 flex flex-row items-stretch">
                    <button id="btn-draw" data-draw-mode="draw_line_string"
                        class="flex-1 bg-transparent border-0 border-r border-white/10 text-white/85 text-xs font-medium relative py-2 px-1 hover:bg-white/10 hover:text-white transition-all duration-200 cursor-pointer [&.active]:bg-gradient-to-b [&.active]:from-[#4682ff66] [&.active]:to-[#4682ff33] [&.active]:text-white [&.active]:font-semibold [&.active]:border-x-2 [&.active]:border-[#64a0ffcc]">Line</button>
                    <button id="btn-surface" data-draw-mode="draw_polygon"
                        class="flex-1 bg-transparent border-0 border-b-0 text-white/85 text-xs font-medium relative py-2 px-1 hover:bg-white/10 hover:text-white transition-all duration-200 cursor-pointer [&.active]:bg-gradient-to-b [&.active]:from-[#4682ff66] [&.active]:to-[#4682ff33] [&.active]:text-white [&.active]:font-semibold [&.active]:border-x-2 [&.active]:border-[#64a0ffcc]">Surface</button>
                </div>
            </div>

            <!-- Points Section -->
            <div
                class="toolbar-section points-section flex-none min-h-fit min-w-0 flex flex-col bg-[#1e1e1e80] border border-white/10 rounded overflow-hidden transition-all duration-300 hover:bg-[#28282899] hover:-translate-y-0.5 hover:shadow-lg hover:border-white/20 relative">
                <div
                    class="section-title px-3 py-2 bg-gradient-to-r from-white/15 to-white/5 border-b border-white/15 text-[11px] font-semibold uppercase tracking-[1px] text-white/90 text-center">
                    Stickers</div>
                <div
                    class="section-content points-grid grid grid-cols-3  gap-2 p-2.5 items-center justify-items-center">
                    <button id="sticker-btn-1" data-sticker-index="0"
                        class="point-btn flex-none w-6 h-6 border-2 border-black/30 rounded-full cursor-pointer transition-all duration-200 shadow-inner hover:scale-115 hover:shadow-[inset_0_2px_4px_rgba(255,255,255,0.4),0_4px_8px_rgba(0,0,0,0.6)] hover:border-white/50 active:scale-120 active:border-[3px] active:border-white active:shadow-[0_0_20px_currentColor]"
                        data-color="#FF6B6B" style="background-color: #FF6B6B;"></button>
                    <button id="sticker-btn-2" data-sticker-index="1"
                        class="point-btn flex-none w-6 h-6 border-2 border-black/30 rounded-full cursor-pointer transition-all duration-200 shadow-inner hover:scale-115 hover:shadow-[inset_0_2px_4px_rgba(255,255,255,0.4),0_4px_8px_rgba(0,0,0,0.6)] hover:border-white/50 active:scale-120 active:border-[3px] active:border-white active:shadow-[0_0_20px_currentColor]"
                        data-color="#4ECDC4" style="background-color: #4ECDC4;"></button>
                    <button id="sticker-btn-3" data-sticker-index="2"
                        class="point-btn flex-none w-6 h-6 border-2 border-black/30 rounded-full cursor-pointer transition-all duration-200 shadow-inner hover:scale-115 hover:shadow-[inset_0_2px_4px_rgba(255,255,255,0.4),0_4px_8px_rgba(0,0,0,0.6)] hover:border-white/50 active:scale-120 active:border-[3px] active:border-white active:shadow-[0_0_20px_currentColor]"
                        data-color="#45B7D1" style="background-color: #45B7D1;"></button>
                    <button id="sticker-btn-4" data-sticker-index="3"
                        class="point-btn flex-none w-6 h-6 border-2 border-black/30 rounded-full cursor-pointer transition-all duration-200 shadow-inner hover:scale-115 hover:shadow-[inset_0_2px_4px_rgba(255,255,255,0.4),0_4px_8px_rgba(0,0,0,0.6)] hover:border-white/50 active:scale-120 active:border-[3px] active:border-white active:shadow-[0_0_20px_currentColor]"
                        data-color="#FFA07A" style="background-color: #FFA07A;"></button>
                    <button id="sticker-btn-5" data-sticker-index="4"
                        class="point-btn flex-none w-6 h-6 border-2 border-black/30 rounded-full cursor-pointer transition-all duration-200 shadow-inner hover:scale-115 hover:shadow-[inset_0_2px_4px_rgba(255,255,255,0.4),0_4px_8px_rgba(0,0,0,0.6)] hover:border-white/50 active:scale-120 active:border-[3px] active:border-white active:shadow-[0_0_20px_currentColor]"
                        data-color="#98D8C8" style="background-color: #98D8C8;"></button>
                    <button id="sticker-btn-6" data-sticker-index="5"
                        class="point-btn flex-none w-6 h-6 border-2 border-black/30 rounded-full cursor-pointer transition-all duration-200 shadow-inner hover:scale-115 hover:shadow-[inset_0_2px_4px_rgba(255,255,255,0.4),0_4px_8px_rgba(0,0,0,0.6)] hover:border-white/50 active:scale-120 active:border-[3px] active:border-white active:shadow-[0_0_20px_currentColor]"
                        data-color="#F7DC6F" style="background-color: #F7DC6F;"></button>
                    <button id="sticker-btn-7" data-sticker-index="6"
                        class="point-btn flex-none w-6 h-6 border-2 border-black/30 rounded-full cursor-pointer transition-all duration-200 shadow-inner hover:scale-115 hover:shadow-[inset_0_2px_4px_rgba(255,255,255,0.4),0_4px_8px_rgba(0,0,0,0.6)] hover:border-white/50 active:scale-120 active:border-[3px] active:border-white active:shadow-[0_0_20px_currentColor]"
                        data-color="#BB8FCE" style="background-color: #BB8FCE;"></button>
                    <button id="sticker-btn-8" data-sticker-index="7"
                        class="point-btn flex-none w-6 h-6 border-2 border-black/30 rounded-full cursor-pointer transition-all duration-200 shadow-inner hover:scale-115 hover:shadow-[inset_0_2px_4px_rgba(255,255,255,0.4),0_4px_8px_rgba(0,0,0,0.6)] hover:border-white/50 active:scale-120 active:border-[3px] active:border-white active:shadow-[0_0_20px_currentColor]"
                        data-color="#85C1E2" style="background-color: #85C1E2;"></button>
                    <button id="sticker-btn-9" data-sticker-index="8"
                        class="point-btn flex-none w-6 h-6 border-2 border-black/30 rounded-full cursor-pointer transition-all duration-200 shadow-inner hover:scale-115 hover:shadow-[inset_0_2px_4px_rgba(255,255,255,0.4),0_4px_8px_rgba(0,0,0,0.6)] hover:border-white/50 active:scale-120 active:border-[3px] active:border-white active:shadow-[0_0_20px_currentColor]"
                        data-color="#F8B739" style="background-color: #F8B739;"></button>
                    <button id="sticker-btn-10" data-sticker-index="9"
                        class="point-btn flex-none w-6 h-6 border-2 border-black/30 rounded-full cursor-pointer transition-all duration-200 shadow-inner hover:scale-115 hover:shadow-[inset_0_2px_4px_rgba(255,255,255,0.4),0_4px_8px_rgba(0,0,0,0.6)] hover:border-white/50 active:scale-120 active:border-[3px] active:border-white active:shadow-[0_0_20px_currentColor]"
                        data-color="#E74C3C" style="background-color: #E74C3C;"></button>
                </div>

            </div>
            <div class="flex gap-2 mx-2.3 mb-2.5">
                <button id="btn-sticker-save"
                    class="flex-1 px-3 py-2 bg-white/5 border border-white/15 rounded-md text-white/85 text-xs font-semibold uppercase tracking-[1px] transition-all duration-200 hover:bg-white/10 hover:border-white/30 hover:text-white">
                    Save
                </button>
                <button id="btn-sticker-eraser"
                    class="flex-1 px-3 py-2 bg-white/5 border border-white/15 rounded-md text-white/85 text-xs font-semibold uppercase tracking-[1px] transition-all duration-200 hover:bg-white/10 hover:border-white/30 hover:text-white">
                    Eraser
                </button>
            </div>

        </div>
    </div>

    <script src="{{ url_for('static', filename='js/maptastic/maptastic.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/maptastic/maptastic-init.js') }}"></script>
    <script type="module" src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>

</html>
